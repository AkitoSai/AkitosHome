# AkitosHome 工會頁面（ObjCViewController）功能說明


====================================================
 # friend API參數：
name        姓名
status      狀態 0:邀請送出(使用者邀請對方), 1:以完成 2:邀請中(對方邀請使用者)
isTop       是否出現黃色圓點（摯友） 0:不出現, 1:出現
pid         使用者唯一id
updateDate  最近一次資料更新時間
 
# 本頁面下方有四個切換選項，分別是1、2、3以及4，以下分別做說明：

1、 好友列表含邀請:向 friend API http://34.84.150.189/union/friend3.php 發出ㄧ個請求（非同步request），得到的響應數據以 stats 為判斷依據，stats=2放入上方的邀請列表，其餘則放入下方的好友列表。

2、 只有好友列表:向 friend API http://34.84.150.189/union/friend1.php 以及  http://34.84.150.189/union/friend2.php 同時發出了兩個請求（皆為非同步request），先得到響應數據的一方會先寫入並使用@synchronized鎖以避免寫入過程受到影響。後得到響應數據的一方會將兩個資料源整合為好友列表,若重覆pid資料則取updateDate較新的那一筆。

3、 無好友畫面:向 friend http://34.84.150.189/union/friend4.php 發出ㄧ個請求（非同步request），由於沒有得到任何資料的響應，所以顯示的是一個空的頁面。

4、 邀請列表支援滿版蓋屏縮合操作:向 friend API http://34.84.150.189/union/friend5.php 
發出ㄧ個請求（非同步request），解析19筆資料（其中7筆為邀請列表），實現全屏展開方式的縮合功能。

# 其他功能：

(1) 好友列表下拉到一定距離後會出現"放開手指進行更新"的背景文字，鬆開手指觸控則會進行重新請求更新。

(2) 完成了點擊搜尋框,畫面上推至搜尋框置頂至navigationBar下方功能。

(3) 邀請列表加入了同意以及拒絕按鈕，選擇同意會將該筆資料移至下方好友列表，選擇拒絕則會將該筆資料從邀請列表移除，重新讀取後則會還原從API下載的資料。

====================================================

Read Me  
Created by 蔡 易達 on 2022/6/8.  
Copyright © 2022年 蔡 易達. All rights reserved.
